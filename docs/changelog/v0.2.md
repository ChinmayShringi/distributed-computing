# v0.2.0 - 2026-01-26

## Infrastructure Migration: Lambda to EC2

Migrated from AWS Lambda + API Gateway architecture to a single EC2 instance hosting both the backend API and admin panel.

---

## Backend Server

- Unified Go HTTP server (`server/cmd/server/main.go`) replacing all Lambda functions
- EC2 instance `omniforge-backend` at `50.17.127.28:3000`
- Systemd service for automatic startup and restart
- Environment-based configuration via `/opt/omniforge/.env`

### API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/v1/auth/login` | POST | User authentication |
| `/v1/auth/refresh` | POST | Token refresh |
| `/v1/allowlist` | GET | Get tool allowlist |
| `/v1/plan` | POST | Generate AI remediation plan |
| `/v1/chat` | POST | AI chat conversation |
| `/v1/step_result` | POST | Record step execution result |
| `/v1/incidents` | GET/POST | List/create incidents |
| `/v1/artifacts/manifest` | GET | Get artifact manifest |
| `/v1/artifacts/{id}` | GET | Get artifact download URL |
| `/health` | GET | Health check |

---

## Admin Panel

- Web-based admin panel at `http://50.17.127.28:3000/admin/`
- Dashboard with system stats (clients, incidents, auto-remediation count)
- Incidents table view
- AI Chat interface for interactive troubleshooting
- Dark theme UI

---

## CLI Updates

### New Features

- Interactive AI chat command (`omniforge chat`)
- Non-interactive login with `--username` and `--password` flags
- Auto-download artifacts from S3 when tarball not provided locally
- One-liner installer script (`install.sh`)

### Configuration Changes

- Default server URL changed to EC2 (`http://50.17.127.28:3000`)
- Artifact downloads now use public S3 URLs

---

## Files Changed

### New Files

| File | Description |
|------|-------------|
| `server/cmd/server/main.go` | Unified HTTP server |
| `server/admin/index.html` | Admin panel frontend |
| `internal/api/chat.go` | Chat API client |
| `install.sh` | One-liner installer script |

### Modified Files

| File | Changes |
|------|---------|
| `server/internal/openai/planner.go` | Added `Chat()` function |
| `server/internal/db/db.go` | Added `Init()` function |
| `server/internal/db/incidents.go` | Added `ListIncidents()` function |
| `cmd/spotlight/commands/root.go` | Added chat command, login flags, auto-download |
| `internal/config/config.go` | Updated `DefaultServerURL` |
| `internal/prereq/docker.go` | Added user to docker group |

---

## AWS Infrastructure

### Created Resources

- EC2 instance `omniforge-backend` (t3.small) in public subnet
- Security group rule allowing EC2 to connect to RDS

### S3 Artifacts

Public artifacts in `omniforge-artifacts-840864614419`:

- `cli/omniforge-linux-amd64`
- `artifacts/hostagent-server-linux-amd64.tar.gz`

---

## Model Updates

- OpenAI model upgraded from `gpt-4o-mini` to `gpt-5.2`
