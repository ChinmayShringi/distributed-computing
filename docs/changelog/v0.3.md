# v0.3 Changelog

## New Features

### Predefined Docker Installation Tool
- Added `install_docker` tool with predefined installation scripts
- Supports multiple distros: Ubuntu, Debian, CentOS, RHEL, Fedora, macOS
- Runs deterministic, step-by-step commands (no AI-generated scripts)
- Automatically adds user to docker group

### Chat Bash Tool Calling
- AI assistant can now execute bash commands automatically
- Commands are executed and results fed back to AI for follow-up
- Enables interactive troubleshooting without manual copy-paste
- AI responds with JSON format containing message and actions

## Improvements

### Doctor Remediation
- Updated OpenAI prompt to suggest remediation tools (not just diagnostics)
- AI now uses `install_docker` when Docker is missing
- AI uses `restart_docker` when Docker daemon is not running
- Dangerous tools now prompt for user confirmation instead of auto-skip

### OpenAI Prompt Updates
- More action-oriented remediation suggestions
- Clear guidance for common issues:
  - "Docker daemon is not running" -> `restart_docker`
  - "Docker not installed" -> `install_docker` with distro
  - "Service X is not running" -> `restart_service`

## Files Changed

| File | Description |
|------|-------------|
| `internal/tools/registry.go` | Added `InstallDockerTool` with predefined scripts |
| `internal/doctor/doctor.go` | Added user confirmation for dangerous tools |
| `internal/api/chat.go` | Added `ChatAction` struct for bash commands |
| `cmd/spotlight/commands/root.go` | Chat now executes AI-returned bash actions |
| `server/internal/openai/planner.go` | Updated prompts, added JSON response for chat |

## Supported Docker Installation Distros

- **Ubuntu**: Full Docker Engine installation via apt
- **Debian**: Full Docker Engine installation via apt
- **CentOS**: Docker CE installation via yum
- **RHEL**: Docker CE installation via yum
- **Fedora**: Docker CE installation via dnf
- **macOS**: Docker Desktop installation via Homebrew
